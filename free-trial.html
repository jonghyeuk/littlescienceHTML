<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LittleScienceAI ë¬´ë£Œì²´í—˜ - 20ë¶„ ë¬´ë£Œë¡œ ì²´í—˜í•´ë³´ì„¸ìš”!</title>
    <style>
        /* ì›ë˜ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€ */
        /* (ì¤‘ëµ - ì›ë³¸ ìŠ¤íƒ€ì¼ ì „ì²´ ìœ ì§€) */
    </style>
</head>
<body>
    <div class="container">
        <div class="free-badge">âœ¨ 100% ë¬´ë£Œ</div>
        <div class="header">
            <h1>ğŸ§ª LittleScienceAI</h1>
            <div class="subtitle">20ë¶„ ë¬´ë£Œ ì²´í—˜</div>
            <p>ê³¼í•™ë…¼ë¬¸ ì£¼ì œ íƒìƒ‰ì˜ ìƒˆë¡œìš´ ê²½í—˜ì„ ë¬´ë£Œë¡œ ë§Œë‚˜ë³´ì„¸ìš”.<br>ê²°ì œ ì—†ì´ ì´ë©”ì¼ í•˜ë‚˜ë¡œ ë°”ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
        </div>
        <div class="benefits">
            <!-- ì›ë˜ í˜œíƒ ì„¹ì…˜ ìœ ì§€ -->
        </div>
        <form class="form-section" onsubmit="handleFormSubmit(event)">
            <div class="input-group">
                <input type="email" id="userEmail" placeholder="ğŸ“§ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                <button type="submit" class="send-btn" id="sendBtn">â¤</button>
            </div>
            <div class="notice">
                âš¡ ì²´í—˜ìš© ì•¡ì„¸ìŠ¤ ì½”ë“œê°€ ì¦‰ì‹œ ë°œì†¡ë©ë‹ˆë‹¤
            </div>
        </form>
        <div class="result" id="resultMessage"></div>
        <div class="bottom-links">
            <!-- í•˜ë‹¨ ë§í¬ ìœ ì§€ -->
        </div>
    </div>
    <script>
        async function getUserIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                return data.ip;
            } catch {
                return 'unknown';
            }
        }

        function generateDeviceFingerprint() {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillText('LittleScienceAI', 2, 2);
                return btoa([
                    navigator.userAgent,
                    navigator.language,
                    screen.width + 'x' + screen.height,
                    new Date().getTimezoneOffset(),
                    canvas.toDataURL()
                ].join('|')).slice(0, 20);
            } catch {
                return 'unknown';
            }
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            const email = document.getElementById('userEmail').value;
            const btn = document.getElementById('sendBtn');
            const resultDiv = document.getElementById('resultMessage');

            if (!isValidEmail(email)) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                resultDiv.style.display = 'block';
                return;
            }

            btn.disabled = true;
            btn.innerText = 'â³';
            resultDiv.style.display = 'none';

            const userIP = await getUserIP();
            const fingerprint = generateDeviceFingerprint();

            const formData = new FormData();
            formData.append('action', 'free_trial');
            formData.append('userEmail', email);
            formData.append('userIP', userIP);
            formData.append('deviceFingerprint', fingerprint);

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbzJn7ku_zQvtb-GP0Z_-QA1O1VWugYjc1_FIldnRbjwj1J6leheeRGqJgIt9nnokkXR0Q/exec', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();

                if (result.success) {
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `${email} ìœ¼ë¡œ ì½”ë“œê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`;
                } else {
                    throw new Error(result.message || 'ì„œë²„ ì˜¤ë¥˜');
                }
            } catch (err) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `ì „ì†¡ ì‹¤íŒ¨: ${err.message}`;
            } finally {
                resultDiv.style.display = 'block';
                btn.disabled = false;
                btn.innerText = 'â¤';
            }
        }

        function processFreeTrial(email) {
            console.warn("processFreeTrialëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©°, handleFormSubmit ë‚´ë¶€ì—ì„œ fetchë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    </script>
</body>
</html>
